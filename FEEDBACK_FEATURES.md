# 用户反馈功能说明

## 功能概述

本系统新增了完整的用户反馈功能，包括：

1. **右下角悬浮球** - 提供快速访问入口
2. **右上角联系按钮** - 在头像左边显示联系和帮助按钮
3. **反馈对话框** - 富文本编辑器，支持截图上传
4. **反馈管理页面** - 管理员查看和处理反馈
5. **帮助中心** - 静态帮助页面

## 功能详情

### 1. 悬浮球功能

- **位置**: 右下角固定位置
- **主球**: 点击展开/收起功能球
- **功能球**: 
  - 用户反馈 (绿色)
  - 帮助中心 (粉色)
  - 消息通知 (蓝色)
  - 系统设置 (橙色)

### 2. 右上角联系按钮

- **联系我们**: 打开反馈对话框
- **帮助**: 跳转到帮助中心页面
- **位置**: 头像左边，响应式设计

### 3. 反馈对话框

#### 表单字段
- **联系方式**: 邮箱或手机号
- **问题类型**: 功能建议、问题反馈、使用咨询、其他
- **问题描述**: 富文本编辑器
- **截图**: 支持上传和自动截图

#### 富文本编辑器功能
- 粗体、斜体、下划线
- 图片插入
- 自动截图功能
- 快捷键支持 (Ctrl+B/I/U)

#### 截图功能
- 自动截图当前页面
- 手动上传图片
- 最多5张截图
- 支持预览和删除

#### 提交数据
- 用户信息 (ID、用户名、Token)
- 提交时间
- 浏览器信息
- 屏幕尺寸
- 窗口尺寸

### 4. 反馈管理页面

#### 统计卡片
- 总反馈数
- 待处理数
- 处理中数
- 已回复数

#### 筛选功能
- 状态筛选 (待处理、处理中、已回复、已关闭)
- 类型筛选 (功能建议、问题反馈、使用咨询、其他)
- 关键词搜索

#### 列表功能
- 分页显示
- 状态标签
- 类型标签
- 操作按钮 (查看、回复、删除)

#### 详情查看
- 完整反馈信息
- 富文本内容显示
- 截图预览
- 回复内容

#### 回复功能
- 回复内容编辑
- 状态更新
- 提交确认

### 5. API接口

#### 反馈相关接口
```javascript
// 提交反馈
POST /api/feedback/submit

// 获取反馈列表
GET /api/feedback/list

// 更新反馈状态
PUT /api/feedback/{id}/status

// 回复反馈
POST /api/feedback/{id}/reply

// 删除反馈
DELETE /api/feedback/{id}

// 获取反馈统计
GET /api/feedback/stats
```

### 6. 路由配置

新增路由：
```javascript
{
  path: 'feedback',
  name: 'FeedbackManagement',
  component: FeedbackManagement,
  meta: { title: '用户反馈管理' }
}
```

### 7. 菜单配置

在侧边栏添加：
```javascript
<el-menu-item index="/admin/feedback">
  <el-icon><ChatDotRound /></el-icon>
  <span>用户反馈</span>
</el-menu-item>
```

## 技术实现

### 组件结构
```
src/components/admin/
├── FeedbackDialog.vue      # 反馈对话框
├── FloatingBalls.vue       # 悬浮球组件
├── FeedbackManagement.vue  # 反馈管理页面
└── Header.vue             # 头部组件 (已修改)
```

### 依赖包
- `html2canvas`: 用于页面截图功能

### 样式特点
- 响应式设计
- 现代化UI
- 流畅动画
- 移动端适配

## 使用说明

### 用户使用
1. 点击右下角悬浮球或右上角"联系我们"按钮
2. 填写反馈表单
3. 可选择上传截图或自动截图
4. 提交反馈

### 管理员使用
1. 进入"用户反馈"页面
2. 查看反馈列表和统计
3. 筛选和搜索特定反馈
4. 查看详情并回复
5. 更新反馈状态

## 注意事项

1. **截图功能**: 需要安装 `html2canvas` 依赖
2. **富文本编辑器**: 使用原生 `contenteditable` 实现
3. **响应式设计**: 移动端自动适配
4. **API集成**: 需要后端提供对应的API接口
5. **权限控制**: 反馈管理页面需要管理员权限

## 扩展建议

1. **邮件通知**: 反馈提交后发送邮件通知
2. **实时通知**: 使用WebSocket实现实时通知
3. **反馈分类**: 增加更多反馈类型和标签
4. **导出功能**: 支持反馈数据导出
5. **批量操作**: 支持批量处理反馈
6. **反馈模板**: 预设常用回复模板 